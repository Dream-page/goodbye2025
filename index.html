<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ì´ˆë“± ì„ìš© ì˜ì–´ ë©´ì ‘ ì—°ìŠµ</title>
    <!-- Tailwind CSS ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK ë¡œë“œ -->
    <script type="module">
        // Firebase ì•± ì´ˆê¸°í™”
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // Firebase Auth ì„œë¹„ìŠ¤
        import { 
            getAuth, 
            signInAnonymously, 
            onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // Firestore ì„œë¹„ìŠ¤
        import { 
            getFirestore, 
            collection, 
            doc, // ë¬¸ì„œ ì°¸ì¡°ìš©
            addDoc, 
            setDoc, // ë°©ë¬¸ì ìˆ˜ ì´ˆê¸°í™”ìš©
            updateDoc, // ë°©ë¬¸ì ìˆ˜ ì—…ë°ì´íŠ¸ìš©
            increment, // ìˆ«ì ì¦ê°€ìš©
            query, 
            onSnapshot, 
            serverTimestamp,
            setLogLevel,
            getDocs, 
            writeBatch 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Firebase ë° ì•± ì„¤ì • ---
        let db, auth, userId;
        let practiceCollectionRef;
        
        // ì‚¬ìš©ìê°€ ì œê³µí•œ Firebase ì„¤ì • ê°’
        const firebaseConfig = {
            apiKey: "AIzaSyBo9J3psRdM1Fh6JW7G8UYcgJGxQXmv9dk", // Firebase SDK í‚¤
            authDomain: "advent-calendar-1f508.firebaseapp.com",
            projectId: "advent-calendar-1f508",
            storageBucket: "advent-calendar-1f508.firebasestorage.app",
            messagingSenderId: "724448812706",
            appId: "1:724448812706:web:fedf4d00d9f147f3b8c1fb",
            measurementId: "G-6CDELFGGB3"
        };
        
        // [ì¤‘ìš”] 403 ì˜¤ë¥˜ í•´ê²°ì„ ìœ„í•´ Google AI Studio (https://aistudio.google.com/app/apikey)ì—ì„œ
        // ë°œê¸‰ë°›ì€ **Gemini API í‚¤**ë¥¼ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”.
        // ì˜ˆ: const apiKey = "AIzaSyAwozb5p5QBA0rSdzTSRbO92fF83u_cU5M";
        const apiKey = "AIzaSyAwozb5p5QBA0rSdzTSRbO92fF83u_cU5M"; // <--- 403 ì˜¤ë¥˜ í•´ê²°ì„ ìœ„í•´ ì´ í‚¤ë¥¼ êµì²´í•˜ì„¸ìš”.

        // Firebase ì´ˆê¸°í™”
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            // setLogLevel('Debug'); // ë°°í¬ ì‹œì—ëŠ” ë¡œê·¸ ë ˆë²¨ ì¡°ì • ê°€ëŠ¥
            console.log("Firebase initialized successfully.");
        } catch (e) {
            console.error("Error initializing Firebase: ", e);
            document.getElementById('main-app').innerHTML = '<p class="text-red-500 text-center">Firebase ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. config ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>';
        }

        // --- UI ìš”ì†Œ ì°¸ì¡° ---
        const questionDisplay = document.getElementById('question-display');
        const recordBtn = document.getElementById('record-btn');
        const userAnswerTextarea = document.getElementById('user-answer');
        const submitBtn = document.getElementById('submit-btn');
        const recordingSection = document.getElementById('recording-section');
        
        const feedbackSection = document.getElementById('feedback-section');
        const loadingSpinner = document.getElementById('loading-spinner');
        const submittedAnswerDisplay = document.getElementById('submitted-answer-display');
        const modelAnswerDisplay = document.getElementById('model-answer-display');
        const aiFeedbackDisplay = document.getElementById('ai-feedback-display');
        const nextBtn = document.getElementById('next-btn');
        
        const historyLog = document.getElementById('history-log');
        const historyToggleBtn = document.getElementById('history-toggle-btn');
        const historyContainer = document.getElementById('history-container');
        const clearHistoryBtn = document.getElementById('clear-history-btn');
        
        const confirmModal = document.getElementById('confirmModal');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');

        // í”¼ë“œë°± í¼ ìš”ì†Œ
        const feedbackForm = document.getElementById('feedback-form');
        const feedbackText = document.getElementById('feedback-text');
        const feedbackSubmitBtn = document.getElementById('feedback-submit-btn');
        const feedbackMessage = document.getElementById('feedback-message');
        
        // ë°©ë¬¸ì ìˆ˜ ìš”ì†Œ
        const visitorCountDisplay = document.getElementById('visitor-count-display');
        
        // ì˜¤ë¥˜ í‘œì‹œì¤„
        const errorDisplay = document.getElementById('error-display');

        // --- ìŒì„± ì¸ì‹ ì„¤ì • ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        let isRecording = false;
        let currentTranscript = "";

        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.lang = 'en-US'; 
            recognition.interimResults = false;
            recognition.continuous = true; 

            recognition.onstart = () => {
                isRecording = true;
                recordBtn.disabled = false; // (ìˆ˜ì •) ë‹¤ì‹œ ëˆ„ë¥¼ ìˆ˜ ìˆë„ë¡(ì¤‘ì§€) í™œì„±í™”
                recordBtn.innerHTML = `
                    <svg class="w-5 h-5 animate-pulse" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a3 3 0 116 0 3 3 0 01-6 0z"></path></svg>
                    <span>ë…¹ìŒ ì¤‘ì§€</span>`;
                recordBtn.classList.remove('bg-red-600', 'hover:bg-red-700');
                recordBtn.classList.add('bg-gray-700', 'hover:bg-gray-800');
                currentTranscript = userAnswerTextarea.value; 
                submitBtn.disabled = true;
            };

            recognition.onresult = (event) => {
                let transcript = "";
                for (let i = event.resultIndex; i < event.results.length; ++i) {
                    transcript += event.results[i][0].transcript + " ";
                }
                currentTranscript = userAnswerTextarea.value + transcript; 
                userAnswerTextarea.value = currentTranscript.trim();
            };

            recognition.onerror = (event) => {
                console.error("Speech recognition error", event.error);
                recordBtn.disabled = false; // (ìˆ˜ì •) ì˜¤ë¥˜ ë°œìƒ ì‹œ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
                if (errorDisplay) {
                    errorDisplay.textContent = `ìŒì„± ì¸ì‹ ì˜¤ë¥˜: ${event.error}. ë§ˆì´í¬ ê¶Œí•œì„ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.`;
                    errorDisplay.classList.remove('hidden');
                }
            };

            recognition.onend = () => {
                isRecording = false;
                recordBtn.disabled = false; // (ìˆ˜ì •) ë…¹ìŒì´ ëë‚˜ë©´ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
                recordBtn.innerHTML = `
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zM10 15a5 5 0 005-5h-1.5a3.5 3.5 0 11-7 0H5a5 5 0 005 5z" clip-rule="evenodd"></path></svg>
                    <span>ë…¹ìŒ ì‹œì‘</span>`;
                recordBtn.classList.add('bg-red-600', 'hover:bg-red-700');
                recordBtn.classList.remove('bg-gray-700', 'hover:bg-gray-800');
                submitBtn.disabled = (userAnswerTextarea.value.trim().length === 0);
            };

            if (recordBtn) {
                // (ìˆ˜ì •) ë ˆì´ìŠ¤ ì»¨ë””ì…˜(ê²½í•©) ë°©ì§€ë¥¼ ìœ„í•œ ë²„íŠ¼ í´ë¦­ ë¡œì§ ìˆ˜ì •
                recordBtn.onclick = () => {
                    if (isRecording) {
                        recordBtn.disabled = true; // (ìˆ˜ì •) ì¤‘ì§€ ì‹œ ì¦‰ì‹œ ë¹„í™œì„±í™”
                        recordBtn.innerHTML = `... <span>ì²˜ë¦¬ ì¤‘...</span>`;
                        recognition.stop();
                    } else {
                        recordBtn.disabled = true; // (ìˆ˜ì •) ì‹œì‘ ì‹œ ì¦‰ì‹œ ë¹„í™œì„±í™” (ì˜¤ë¥˜ ë°©ì§€)
                        recordBtn.innerHTML = `... <span>ì‹œì‘ ì¤‘...</span>`;
                        try {
                            recognition.start();
                        } catch (e) {
                            console.error("Failed to start recognition:", e);
                            recordBtn.disabled = false; // (ìˆ˜ì •) ì˜ˆì™¸ ë°œìƒ ì‹œ ë²„íŠ¼ í™œì„±í™”
                            // `onend`ê°€ í˜¸ì¶œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ UI ì›ìƒ ë³µêµ¬
                            isRecording = false;
                            recordBtn.innerHTML = `... <span>ë…¹ìŒ ì‹œì‘</span>`;
                            recordBtn.classList.add('bg-red-600', 'hover:bg-red-700');
                            recordBtn.classList.remove('bg-gray-700', 'hover:bg-gray-800');
                            if (errorDisplay) {
                                errorDisplay.textContent = `ìŒì„± ì¸ì‹ì„ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${e.message}`;
                                errorDisplay.classList.remove('hidden');
                            }
                        }
                    }
                };
            }

        } else {
            console.error("Speech Recognition not supported");
            window.addEventListener('load', () => {
                if (errorDisplay) {
                    errorDisplay.textContent = 'ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Chrome ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.';
                    errorDisplay.classList.remove('hidden');
                }
                if (recordingSection) recordingSection.classList.add('hidden'); 
            });
        }

        // --- ì§ˆë¬¸ ì—”ì§„ ---
        const seedQuestions = [
            "Choose a topic that can foster community competency and suggest two activities you want to do.",
            "Suggest 2 effective teaching methods in-class, and 2 effective teaching methods after school to support slow-learner.",
            "Suggest how to use English textbook when there is a learning gap between students and why.",
            "Suggest two ways and effects of using AI and Digital devices for learning English.",
            "Suggest physical and non-physical aspects of effective environment that you would consider for 3rd grade students.",
            "Suggest two ways to provide individual feedback in online class while cooperating with the native teacher.",
            "What is your opinion about global success of Korean culture?",
            "Do you think that Artificial Intelligence (AI) can replace the human teacher?",
            "Explain the two strategies that you used to engage students in the class in your demo lesson.",
            "What makes the students keep the class rules constantly?",
            "What is the most important factor of diminishing children's education gap?",
            "How would you give hope to the students who lack of confidence?",
            "Tell me about your turning point experience in life and describe it.",
            "How will you manage a peaceful classroom without bullying?",
            "Suggest 2 teaching materials and how to use them to integrate two language skills.",
            "Describe your one short-term plan and one long-term plan to develop your teaching expertise.",
            "Provide 2 ways to activate students' Schemata on the introduction stage in English lesson.",
            "Tell us 2 criteria to choose and use storybook in English lesson.",
            "Tell us 2 strategies to promote students to read more books.",
            "Tell us 2 methods to increase students' English use in the classroom.",
            "Tell us 2 strategies to promote students to cooperate in a group project.",
            "Which one do you prefer typing or handwriting while taking a note during a lecture? Choose one, and tell 2 reasons.",
            "What do you think is the ideal number of students in the class? Tell us 2 reasons.",
            "If you had a chance to learn a language other than English, what language would you like to learn? Tell us 2 reasons.",
            "As a teacher, how will you motivate students who are not interested in learning English? Provide two specific strategies.",
            "How can you encourage students to actively participate in English class? Give us two specific methods.",
            "Tell us 2 advantages of role play activitiy.", 
            "Tell us two things you would like to do on your first vacation after becoming a teacher."
        ];
        
        let usedSeedQuestions = new Set();
        let currentQuestion = "";
        let allHistory = []; 

        async function loadNextQuestion() {
            // (ìˆ˜ì •) ìŒì„± ì¸ì‹ì´ ì§„í–‰ ì¤‘ì´ë©´ ë©ˆì¶¤
            if (isRecording) {
                recognition.stop();
            }
            
            if (feedbackSection) feedbackSection.classList.add('hidden');
            if (recordingSection) recordingSection.classList.remove('hidden');
            if (userAnswerTextarea) userAnswerTextarea.value = "";
            if (submitBtn) submitBtn.disabled = true;
            if (questionDisplay) {
                questionDisplay.textContent = "ìƒˆë¡œìš´ ì§ˆë¬¸ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...";
                questionDisplay.classList.add('animate-pulse');
            }

            let availableSeeds = seedQuestions.filter(q => !usedSeedQuestions.has(q));

            if (availableSeeds.length > 0) {
                currentQuestion = availableSeeds[Math.floor(Math.random() * availableSeeds.length)];
                usedSeedQuestions.add(currentQuestion);
                displayQuestion(currentQuestion);
            } else {
                await generateNewQuestion();
            }
        }

        function displayQuestion(question) {
            currentQuestion = question;
            if (questionDisplay) {
                questionDisplay.textContent = currentQuestion;
                questionDisplay.classList.remove('animate-pulse');
            }
        }

        async function generateNewQuestion() {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const examples = seedQuestions.sort(() => 0.5 - Math.random()).slice(0, 4).join('\n - ');

            const payload = {
                contents: [{
                    parts: [{
                        text: `You are an expert question generator for the Korean Elementary School Teacher Certification Exam (ì´ˆë“± ì„ìš©ê³ ì‹œ) English interview. 
                        Your sole purpose is to provide a single, high-quality interview question in English.
                        The question must be in English. 
                        Do not add any preamble, explanation, or quotation marks. Just return the single question text. 
                        The question should be similar in style to these examples:\n - ${examples}`
                    }]
                }],
                generationConfig: {
                    maxOutputTokens: 100,
                    temperature: 0.9,
                }
            };

            try {
                const response = await fetchWithExponentialBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    if (response.status === 403) {
                         throw new Error("Gemini API Keyê°€ ì˜ëª»ë˜ì—ˆê±°ë‚˜ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. Google AI Studioì—ì„œ í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (!result.candidates || !result.candidates[0].content || !result.candidates[0].content.parts[0].text) {
                     if (result.candidates && result.candidates[0].finishReason === "SAFETY") {
                         throw new Error("Response blocked due to safety settings.");
                     }
                    throw new Error("Invalid response structure from API.");
                }

                const newQuestion = result.candidates[0].content.parts[0].text.trim();
                displayQuestion(newQuestion);
            } catch (error) {
                console.error("Error generating new question:", error);
                displayQuestion("ì§ˆë¬¸ ìƒì„± ì‹¤íŒ¨: " + error.message);
            }
        }

        if (submitBtn) {
            submitBtn.onclick = async () => {
                // (ìˆ˜ì •) ìŒì„± ì¸ì‹ì´ ì§„í–‰ ì¤‘ì´ë©´ ë©ˆì¶¤
                if (isRecording) {
                    recognition.stop();
                }
                
                const userAnswer = userAnswerTextarea.value;
                if (userAnswer.trim().length === 0) return;

                if (recordingSection) recordingSection.classList.add('hidden');
                if (feedbackSection) feedbackSection.classList.remove('hidden');
                if (loadingSpinner) loadingSpinner.classList.remove('hidden');
                if (submittedAnswerDisplay) submittedAnswerDisplay.parentElement.classList.add('hidden');
                if (modelAnswerDisplay) modelAnswerDisplay.parentElement.classList.add('hidden');
                if (aiFeedbackDisplay) aiFeedbackDisplay.parentElement.classList.add('hidden');
                if (nextBtn) nextBtn.classList.add('hidden');

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const systemPrompt = `You are an expert evaluator for the Korean Elementary Teacher Exam English interview.
                The user needs to answer 2 questions in 5 minutes, so answers must be SIMPLE, CLEAR, and CONVERSATIONAL.
                
                You must provide:
                1.  'feedback' (in KOREAN): Friendly, constructive feedback. Start by praising, then suggest simple improvements. Be encouraging. (ì˜ˆ: "ì¢‹ì€ ì‹œë„ì˜€ì–´ìš”! ë¬¸ì¥ì„ ì¡°ê¸ˆ ë” ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ë“¬ìœ¼ë©´...")
                2.  'modelAnswer' (in ENGLISH): This is the *most important* part.
                    - It must be a SLIGHTLY IMPROVED version of the user's answer. Do NOT write a new, professional answer.
                    - Use SIMPLE, COMMON English words. (like user's examples: "I can write more faster", "my handwriting is pretty bad", "storybook", "role play").
                    - DO NOT use difficult or academic words (e.g., "frequently", "differentiated", "ensure", "implement", "personalized").
                    - Keep it SHORT and DIRECT.
                    - It MUST start with "I will tell you about..." or "I will explain..." or "I prefer...".
                
                Respond ONLY in this JSON format.`;
                
                const payload = {
                    contents: [{
                        parts: [{
                            text: `Question: "${currentQuestion}"\n\nStudent's Answer: "${userAnswer}"`
                        }]
                    }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                modelAnswer: { "type": "STRING", "description": "A slightly improved version of the user's answer, using simple English and starting with 'I will...'." },
                                feedback: { "type": "STRING", "description": "Constructive feedback in KOREAN." }
                            },
                            required: ["modelAnswer", "feedback"]
                        }
                    }
                };

                try {
                    const response = await fetchWithExponentialBackoff(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status === 403) {
                            throw new Error("Gemini API Keyê°€ ì˜ëª»ë˜ì—ˆê±°ë‚˜ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. Google AI Studioì—ì„œ í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.");
                        }
                        if (response.status === 400) {
                            const errorBody = await response.json();
                            if (errorBody.error && errorBody.error.message.includes("API key not valid")) {
                                throw new Error("Gemini API Keyê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (400 Bad Request)");
                            } else {
                                throw new Error(errorBody.error ? errorBody.error.message : "400 Bad Request");
                            }
                        }
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    
                    if (!result.candidates || !result.candidates[0].content || !result.candidates[0].content.parts[0].text) {
                         if (result.candidates && result.candidates[0].finishReason === "SAFETY") {
                             throw new Error("Response blocked due to safety settings.");
                         }
                        throw new Error("Invalid response structure from API.");
                    }

                    const jsonResponse = JSON.parse(result.candidates[0].content.parts[0].text);
                    const { modelAnswer, feedback } = jsonResponse;

                    if (submittedAnswerDisplay) submittedAnswerDisplay.textContent = userAnswer;
                    if (modelAnswerDisplay) modelAnswerDisplay.textContent = modelAnswer;
                    if (aiFeedbackDisplay) aiFeedbackDisplay.textContent = feedback;

                    if (submittedAnswerDisplay) submittedAnswerDisplay.parentElement.classList.remove('hidden');
                    if (modelAnswerDisplay) modelAnswerDisplay.parentElement.classList.remove('hidden');
                    if (aiFeedbackDisplay) aiFeedbackDisplay.parentElement.classList.remove('hidden');
                    if (nextBtn) nextBtn.classList.remove('hidden');

                    if (userId) {
                        await savePractice(currentQuestion, userAnswer, modelAnswer, feedback);
                    }

                } catch (error) {
                    console.error("Error getting feedback:", error);
                    if (aiFeedbackDisplay) {
                        aiFeedbackDisplay.textContent = "í”¼ë“œë°± ìƒì„± ì‹¤íŒ¨: " + error.message;
                        aiFeedbackDisplay.parentElement.classList.remove('hidden');
                    }
                    if (nextBtn) nextBtn.classList.remove('hidden'); 
                } finally {
                    if (loadingSpinner) loadingSpinner.classList.add('hidden');
                }
            };
        }
        
        async function fetchWithExponentialBackoff(url, options, retries = 3, delay = 1000) {
            try {
                const response = await fetch(url, options);
                if (response.status === 403 || response.status === 400) {
                    return response;
                }
                if (response.status === 429 && retries > 0) { 
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithExponentialBackoff(url, options, retries - 1, delay * 2);
                }
                if (!response.ok && response.status >= 500 && retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithExponentialBackoff(url, options, retries - 1, delay * 2);
                }
                return response;
            } catch (error) { 
                if (retries > 0) {
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithExponentialBackoff(url, options, retries - 1, delay * 2);
                }
                throw error;
            }
        }


        // --- Firestore ì—°ë™ (ê°œì¸ ê¸°ë¡) ---
        async function savePractice(question, userAnswer, modelAnswer, feedback) {
            try {
                if (!practiceCollectionRef) return;
                await addDoc(practiceCollectionRef, {
                    question: question,
                    userAnswer: userAnswer,
                    modelAnswer: modelAnswer,
                    feedback: feedback,
                    timestamp: serverTimestamp()
                });
            } catch (e) {
                console.error("Error adding document: ", e);
            }
        }

        function loadHistory() {
            if (!practiceCollectionRef) return;
            const q = query(practiceCollectionRef);
            onSnapshot(q, (snapshot) => {
                if (!historyLog) return;
                historyLog.innerHTML = ""; 
                allHistory = []; 
                
                if (snapshot.empty) {
                    historyLog.innerHTML = '<p class="text-gray-500">ì•„ì§ ê³µë¶€ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                    return;
                }
                
                snapshot.forEach((doc) => {
                    allHistory.push(doc.data());
                });

                allHistory.sort((a, b) => {
                    const timeA = a.timestamp ? a.timestamp.toDate().getTime() : 0;
                    const timeB = b.timestamp ? b.timestamp.toDate().getTime() : 0;
                    return timeB - timeA;
                });

                renderHistory(allHistory);
            }, (error) => { 
                console.error("Error loading history:", error);
                if (historyLog) historyLog.innerHTML = `<p class="text-red-500">ê³µë¶€ ê¸°ë¡ ë¡œë“œ ì‹¤íŒ¨: ${error.message}. Firestore ê·œì¹™ì„ í™•ì¸í•˜ì„¸ìš”.</p>`;
            });
        }

        function renderHistory(historyData) {
            if (!historyLog) return;
            historyLog.innerHTML = ""; 
            
            if (historyData.length === 0) {
                 historyLog.innerHTML = '<p class="text-gray-500">ì•„ì§ ê³µë¶€ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                 return;
            }

            historyData.forEach((data) => {
                const logEntry = document.createElement('div');
                logEntry.className = "bg-white p-4 rounded-lg shadow-sm border border-gray-200 space-y-3";
                logEntry.innerHTML = `
                    <h5 class="font-semibold text-gray-800">ì§ˆë¬¸: ${data.question}</h5>
                    <div class="border-t pt-2">
                        <p class="text-sm font-medium text-blue-700">ë‚˜ì˜ ë‹µë³€:</p>
                        <p class="text-sm text-gray-700 whitespace-pre-wrap">${data.userAnswer || ''}</p>
                    </div>
                    <div class="border-t pt-2">
                        <p class="text-sm font-medium text-green-700">ëª¨ë²” ë‹µì•ˆ (AI):</p>
                        <p class="text-sm text-gray-700 whitespace-pre-wrap">${data.modelAnswer || ''}</p>
                    </div>
                    <div class="border-t pt-2">
                        <p class="text-sm font-medium text-yellow-800">AI í”¼ë“œë°± (í•œêµ­ì–´):</p>
                        <p class="text-sm text-gray-700 whitespace-pre-wrap">${data.feedback || ''}</p>
                    </div>
                    <p class="text-xs text-gray-400 text-right">${data.timestamp ? new Date(data.timestamp.toDate()).toLocaleString('ko-KR') : 'ë‚ ì§œ ì—†ìŒ'}</p>
                `;
                historyLog.appendChild(logEntry);
            });
        }

        // --- ì´ ë°©ë¬¸ì ìˆ˜ ë¡œì§ (ì„¸ì…˜ë‹¹ 1íšŒ) ---
        function setupVisitorCounter() {
            const statsDocRef = doc(db, "meta", "stats");

            // (ìˆ˜ì •) ì¤‘ë³µ ì¹´ìš´íŠ¸ ë°©ì§€ ë¡œì§ ê°•í™”
            const sessionKey = 'visitorCounted';
            if (!sessionStorage.getItem(sessionKey)) {
                // (ìˆ˜ì •) ì„¸ì…˜ ì €ì¥ì†Œë¥¼ *ë¨¼ì €* ì„¤ì •í•©ë‹ˆë‹¤.
                // ìŠ¤í¬ë¦½íŠ¸ê°€ Firebase í˜¸ì¶œ í›„ .then() ì „ì— ë©ˆì¶”ë”ë¼ë„
                // ìƒˆë¡œê³ ì¹¨ ì‹œ ì¤‘ë³µ ì¹´ìš´íŠ¸ë˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.
                sessionStorage.setItem(sessionKey, 'true'); 
                console.log("Setting session key and incrementing count...");

                setDoc(statsDocRef, { visitorCount: increment(1) }, { merge: true })
                    .then(() => {
                        console.log("Visitor count incremented successfully.");
                    })
                    .catch((e) => {
                        // (ìˆ˜ì •) ì¹´ìš´íŠ¸ ì‹¤íŒ¨ ì‹œ, ë‹¤ìŒ ë°©ë¬¸ì„ ìœ„í•´ ì„¸ì…˜ í‚¤ë¥¼ ì§€ìš°ì§€ *ì•ŠìŠµë‹ˆë‹¤*.
                        // (ì˜¤ë¥˜ê°€ ë‚˜ë„ ì´ ì„¸ì…˜ì—ì„œëŠ” ì´ë¯¸ ì‹œë„í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼)
                        console.error("Error incrementing visitor count:", e);
                        if (visitorCountDisplay) {
                            visitorCountDisplay.textContent = `ë°©ë¬¸ì ìˆ˜ ì˜¤ë¥˜`;
                        }
                        if (errorDisplay) {
                            errorDisplay.textContent = `ë°©ë¬¸ì ìˆ˜ ì§‘ê³„ ì‹¤íŒ¨: Firestore 'meta/stats' ë¬¸ì„œì— ëŒ€í•œ ì“°ê¸° ê¶Œí•œì„ í™•ì¸í•˜ì„¸ìš”. (ì˜¤ë¥˜: ${e.message})`;
                            errorDisplay.classList.remove('hidden');
                        }
                    });
            } else {
                console.log("Visitor already counted for this session.");
            }

            // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ (UI í‘œì‹œìš©)
            onSnapshot(statsDocRef, (docSnapshot) => {
                if (docSnapshot.exists()) {
                    const data = docSnapshot.data();
                    const count = data.visitorCount || 0;
                    if (visitorCountDisplay) {
                        visitorCountDisplay.textContent = `ì´ ë°©ë¬¸ì: ${count.toLocaleString()}ëª…`;
                    }
                } else {
                     if (visitorCountDisplay) {
                        visitorCountDisplay.textContent = `ì´ ë°©ë¬¸ì: 0ëª…`;
                    }
                }
            }, (error) => { 
                console.error("Error listening to visitor count:", error);
                if (visitorCountDisplay) {
                    visitorCountDisplay.textContent = `ë°©ë¬¸ì ìˆ˜ ë¡œë“œ ì‹¤íŒ¨`;
                }
            });
        }

        // --- Google Form í”¼ë“œë°± ---
        async function handleFeedbackSubmit(event) {
            event.preventDefault(); 
            
            const feedbackValue = feedbackText.value.trim();
            if (feedbackValue.length === 0) {
                feedbackMessage.textContent = "ì˜ê²¬ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
                feedbackMessage.className = "text-yellow-600 text-sm mt-2";
                feedbackMessage.classList.remove('hidden');
                return;
            }

            const GOOGLE_FORM_ACTION_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdHztn5gaeJefnDyYc_JANn7nvnCD7oA-sRCSqefxUivM87wA/formResponse";
            const GOOGLE_FORM_ENTRY_ID = "entry.677219120";

            const formData = new FormData();
            formData.append(GOOGLE_FORM_ENTRY_ID, feedbackValue);

            feedbackSubmitBtn.disabled = true;
            feedbackSubmitBtn.textContent = "ì œì¶œ ì¤‘...";
            feedbackMessage.classList.add('hidden');

            try {
                await fetch(GOOGLE_FORM_ACTION_URL, {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors' 
                });
                
                feedbackText.value = "";
                feedbackMessage.textContent = "ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤!";
                feedbackMessage.className = "text-green-600 text-sm mt-2";
                feedbackMessage.classList.remove('hidden');

            } catch (error) {
                console.error('Feedback submission error:', error);
                feedbackMessage.textContent = "ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
                feedbackMessage.className = "text-red-600 text-sm mt-2";
                feedbackMessage.classList.remove('hidden');
            } finally {
                feedbackSubmitBtn.disabled = false;
                feedbackSubmitBtn.textContent = "ì˜ê²¬ ì œì¶œí•˜ê¸°";
            }
        }


        // --- ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---
        window.addEventListener('load', () => {
            
            // D-Day Counter Logic
            try {
                const dDayDisplay = document.getElementById('d-day-display-content');
                if (dDayDisplay) {
                    const targetDate = new Date('2026-01-07T00:00:00');
                    const today = new Date();
                    today.setHours(0, 0, 0, 0); 
                    const diffTime = targetDate.getTime() - today.getTime();
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 

                    let dDayText = "";
                    if (diffDays > 0) {
                        dDayText = `ë©´ì ‘ê¹Œì§€ D-${diffDays} ğŸ€`;
                    } else if (diffDays === 0) {
                        dDayText = `D-Day! í–‰ìš´ì„ ë¹•ë‹ˆë‹¤! ğŸ€`;
                    } else {
                        dDayText = `ë©´ì ‘ D+${Math.abs(diffDays)} ğŸ€`;
                    }
                    dDayDisplay.textContent = dDayText;
                }
            } catch (e) {
                console.error("Error calculating D-Day:", e);
                const dDayDisplay = document.getElementById('d-day-display-content');
                if(dDayDisplay) dDayDisplay.textContent = "D-Day ğŸ€"; 
            }

            // Firebase Auth ìƒíƒœ ë¦¬ìŠ¤ë„ˆ
            if (auth) {
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("User is signed in:", userId);
                    } else {
                        console.log("User is not signed in, attempting auth...");
                        try {
                            const userCredential = await signInAnonymously(auth);
                            userId = userCredential.user.uid;
                            console.log("Signed in anonymously:", userId);
                        } catch (error) {
                            console.error("Authentication failed:", error);
                            if (errorDisplay) {
                                errorDisplay.textContent = `ì¸ì¦ ì‹¤íŒ¨: Firebase 'ìµëª… ë¡œê·¸ì¸'ì´ í™œì„±í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. (ì˜¤ë¥˜: ${error.message})`;
                                errorDisplay.classList.remove('hidden');
                            }
                            return;
                        }
                    }
                    
                    try {
                        practiceCollectionRef = collection(db, `users/${userId}/interview_practice`);
                        loadHistory();
                        loadNextQuestion(); 
                        
                        // ë°©ë¬¸ì ìˆ˜ ì¹´ìš´í„° ì‹œì‘
                        setupVisitorCounter();
                        
                    } catch (e) {
                         console.error("Error setting up Firestore:", e);
                         if (errorDisplay) {
                             errorDisplay.textContent = `Firestore ì„¤ì • ì˜¤ë¥˜: ${e.message}`;
                             errorDisplay.classList.remove('hidden');
                         }
                    }
                }, (error) => { 
                    console.error("Auth state error:", error);
                    if (errorDisplay) {
                        errorDisplay.textContent = `ì¸ì¦ ìƒíƒœ ì˜¤ë¥˜: ${error.message}`;
                        errorDisplay.classList.remove('hidden');
                    }
                });
            } else {
                console.error("Firebase Auth service is not available.");
                 if (errorDisplay) {
                     errorDisplay.textContent = "Firebase Auth ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.";
                     errorDisplay.classList.remove('hidden');
                 }
            }

            if (userAnswerTextarea) {
                userAnswerTextarea.addEventListener('input', () => {
                    if (submitBtn) submitBtn.disabled = (userAnswerTextarea.value.trim().length === 0);
                });
            }
        });

        if (nextBtn) nextBtn.onclick = loadNextQuestion;

        if (historyToggleBtn) {
            historyToggleBtn.onclick = () => {
                if (historyContainer) {
                    historyContainer.classList.toggle('hidden');
                    historyToggleBtn.textContent = historyContainer.classList.contains('hidden') ? 'ê³µë¶€ ê¸°ë¡ ë³´ê¸°' : 'ê³µë¶€ ê¸°ë¡ ìˆ¨ê¸°ê¸°';
                }
            };
        }

        if (clearHistoryBtn) {
            clearHistoryBtn.onclick = () => {
                if (confirmModal) confirmModal.classList.remove('hidden'); 
            };
        }
        
        if (cancelDeleteBtn) {
            cancelDeleteBtn.onclick = () => { 
                if (confirmModal) confirmModal.classList.add('hidden'); 
            };
        }

        if (confirmDeleteBtn) {
            confirmDeleteBtn.onclick = async () => {
                try {
                    if (!practiceCollectionRef) {
                         if (confirmModal) confirmModal.classList.add('hidden');
                         return;
                    }
                    const q = query(practiceCollectionRef);
                    const snapshot = await getDocs(q); 
                    const batch = writeBatch(db); 
                    snapshot.forEach(doc => {
                        batch.delete(doc.ref);
                    });
                    await batch.commit();
                    allHistory = [];
                    renderHistory(allHistory); 
                    if (confirmModal) confirmModal.classList.add('hidden'); 

                } catch (error) {
                    console.error("Error clearing history:", error);
                    if(errorDisplay) {
                        errorDisplay.textContent = `ê¸°ë¡ ì‚­ì œ ì¤‘ ì˜¤ë¥˜: ${error.message}`;
                        errorDisplay.classList.remove('hidden');
                    } else {
                        alert("ê¸°ë¡ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
                    }
                    if (confirmModal) confirmModal.classList.add('hidden');
                }
            };
        }

        if (feedbackForm) {
            feedbackForm.addEventListener('submit', handleFeedbackSubmit);
        }

    </script>
</head>
<body class="bg-gray-100 font-sans p-4 md:p-8">

    <!-- ì˜¤ë¥˜ í‘œì‹œì¤„ -->
    <div id="error-display" class="hidden max-w-4xl mx-auto p-4 mb-4 bg-red-100 text-red-700 border border-red-300 rounded-lg"></div>

    <div id="main-app" class="max-w-4xl mx-auto space-y-6">
        
        <!-- D-Day & Stats Counter -->
        <div class="flex flex-col items-end -mb-2 space-y-2">
            <div class="bg-white py-2 px-4 rounded-lg shadow-lg text-lg font-semibold text-green-700 flex items-center gap-2">
                <span id="d-day-display-content">Loading...</span>
            </div>
            <!-- ë°©ë¬¸ì ìˆ˜ í‘œì‹œ -->
            <div class="bg-blue-50 py-1 px-3 rounded-lg border border-blue-100 text-sm font-medium text-blue-600 flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg>
                <span id="visitor-count-display">ë°©ë¬¸ì ìˆ˜ ì§‘ê³„ ì¤‘...</span>
            </div>
        </div>

        <!-- í—¤ë” -->
        <header class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-800">2026 ì´ˆë“± ì„ìš© ì˜ì–´ ë©´ì ‘ ì—°ìŠµ</h1>
            <p class="text-lg text-gray-600 mt-2">ë‚˜ë§Œì˜ ë§ì¶¤í˜• í”¼ë“œë°±ê³¼ í•¨ê»˜ ì‹¤ì „ì²˜ëŸ¼ ì—°ìŠµí•˜ì„¸ìš”!</p>
        </header>

        <!-- ë©´ì ‘ ì—°ìŠµ ì¹´ë“œ -->
        <main class="bg-white p-6 md:p-8 rounded-xl shadow-2xl space-y-6">
            
            <!-- ì§ˆë¬¸ í‘œì‹œ -->
            <div>
                <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wide">ë©´ì ‘ ì§ˆë¬¸:</h2>
                <div id="question-display" class="mt-2 p-4 bg-gray-50 rounded-lg text-lg md:text-xl font-semibold text-gray-900 min-h-[6rem] flex items-center justify-center text-center">
                    ì§ˆë¬¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
                </div>
            </div>

            <!-- ë…¹ìŒ ì„¹ì…˜ -->
            <div id="recording-section" class="space-y-4">
                <div class="flex flex-col sm:flex-row gap-4">
                    <button id="record-btn" class="flex-shrink-0 w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 disabled:opacity-50">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zM10 15a5 5 0 005-5h-1.5a3.5 3.5 0 11-7 0H5a5 5 0 005 5z" clip-rule="evenodd"></path></svg>
                        <span>ë…¹ìŒ ì‹œì‘</span>
                    </button>
                    <p class="text-sm text-gray-500 flex-grow text-center sm:text-left my-auto">ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ì˜ì–´ë¡œ ë‹µë³€í•˜ì„¸ìš”. ë‹µë³€ ìˆ˜ì •ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                </div>
                
                <label for="user-answer" class="block text-sm font-medium text-gray-700">ë‚˜ì˜ ë‹µë³€ (ìŒì„± ì¸ì‹ ê²°ê³¼ / ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥):</label>
                <textarea id="user-answer" class="w-full h-32 p-3 bg-gray-50 border border-gray-300 rounded-lg shadow-inner focus:ring-blue-500 focus:border-blue-500" placeholder="ì—¬ê¸°ì— ìŒì„± ì¸ì‹ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤..."></textarea>
                
                <button id="submit-btn" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                    ë‹µë³€ ì œì¶œ ë° í”¼ë“œë°± ë°›ê¸°
                </button>
            </div>

            <!-- í”¼ë“œë°± ì„¹ì…˜ -->
            <div id="feedback-section" class="hidden space-y-6">
                <!-- ë¡œë”© ìŠ¤í”¼ë„ˆ -->
                <div id="loading-spinner" class="hidden flex items-center justify-center gap-3 text-lg text-blue-600 p-4">
                    <svg class="animate-spin h-6 w-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span>Gemini AIê°€ í”¼ë“œë°±ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...</span>
                </div>

                <!-- ë‚˜ì˜ ë‹µë³€ -->
                <div class="space-y-2">
                    <h4 class="text-lg font-semibold text-gray-800">ë‚˜ì˜ ë‹µë³€:</h4>
                    <p id="submitted-answer-display" class="bg-gray-50 p-4 rounded-lg shadow-inner text-gray-700 whitespace-pre-wrap"></p>
                </div>

                <!-- ëª¨ë²” ë‹µì•ˆ -->
                <div class="space-y-2">
                    <h4 class="text-lg font-semibold text-green-800">ëª¨ë²” ë‹µì•ˆ (AI):</h4>
                    <p id="model-answer-display" class="bg-green-50 border border-green-200 p-4 rounded-lg shadow-inner text-green-900 whitespace-pre-wrap"></p>
                </div>

                <!-- AI í”¼ë“œë°± -->
                <div class="space-y-2">
                    <h4 class="text-lg font-semibold text-yellow-800">Gemini AI í”¼ë“œë°± (í•œêµ­ì–´):</h4>
                    <p id="ai-feedback-display" class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg shadow-inner text-yellow-900 whitespace-pre-wrap"></p>
                </div>

                <!-- ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼ -->
                <button id="next-btn" class="hidden w-full bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition duration-200">
                    ë‹¤ìŒ ë¬¸ì œë¡œ
                </button>
            </div>
        </main>

        <!-- ê³µë¶€ ê¸°ë¡ ì„¹ì…˜ -->
        <section class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4">
                <h3 class="text-2xl font-bold text-gray-800">ë‚˜ì˜ ê³µë¶€ ê¸°ë¡ </h3>
                <div class="flex gap-2">
                    <button id="history-toggle-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium py-2 px-4 rounded-lg bg-blue-50 hover:bg-blue-100 transition">ê³µë¶€ ê¸°ë¡ ìˆ¨ê¸°ê¸°</button>
                    <button id="clear-history-btn" class="text-sm text-red-600 hover:text-red-800 font-medium py-2 px-4 rounded-lg bg-red-50 hover:bg-red-100 transition">ì „ì²´ ê¸°ë¡ ì‚­ì œ</button>
                </div>
            </div>
            <div id="history-container" class="space-y-4 max-h-[30rem] overflow-y-auto p-4 bg-gray-50 rounded-lg border">
                <div id="history-log" class="space-y-4">
                    <p class="text-gray-500">ê³µë¶€ ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>
        </section>

        <!-- í”¼ë“œë°± í¼ ì„¹ì…˜ -->
        <section class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
            <h3 class="text-2xl font-bold text-gray-800 mb-4">ì•± í”¼ë“œë°±</h3>
            <p class="text-gray-600 mb-4">
                ì•±ì„ ì‚¬ìš©í•˜ì‹œë©´ì„œ ëŠë‚€ ì¢‹ì€ ì , ë¶ˆí¸í•œ ì , ê°œì„  ì•„ì´ë””ì–´ ë“±ì„ ììœ ë¡­ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš”!
                (<a href="https://blog.naver.com/codenamedream" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">https://blog.naver.com/codenamedream</a> ë§í¬ë¥¼ ëˆ„ë¥´ë©´ ë¸”ë¡œê·¸ë¡œ ì´ë™í•©ë‹ˆë‹¤.)
            </p>
            <form id="feedback-form">
                <label for="feedback-text" class="sr-only">í”¼ë“œë°± ë‚´ìš©</label>
                <textarea id="feedback-text" class="w-full h-28 p-3 bg-gray-50 border border-gray-300 rounded-lg shadow-inner focus:ring-blue-500 focus:border-blue-500" placeholder="ì—¬ê¸°ì— ì˜ê²¬ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                <button id="feedback-submit-btn" type="submit" class="w-full mt-4 bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-gray-800 transition duration-200">
                    ì˜ê²¬ ì œì¶œí•˜ê¸°
                </button>
                <p id="feedback-message" class="hidden text-sm mt-2"></p>
            </form>
        </section>

    </div>

    <!-- ê¸°ë¡ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
    <div id="confirmModal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4">
        <div class="bg-white rounded-lg shadow-2xl max-w-sm w-full p-6">
            <h4 class="text-xl font-bold text-gray-900 mb-2">ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h4>
            <p class="text-gray-600 mb-6">ëª¨ë“  ê³µë¶€ ê¸°ë¡ì´ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë˜ë©°, ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            <div class="flex justify-end gap-3">
                <button id="cancelDeleteBtn" class="py-2 px-4 rounded-lg bg-gray-200 text-gray-800 hover:bg-gray-300 transition font-medium">
                    ì·¨ì†Œ
                </button>
                <button id="confirmDeleteBtn" class="py-2 px-4 rounded-lg bg-red-600 text-white hover:bg-red-700 transition font-medium">
                    ì‚­ì œ í™•ì¸
                </button>
            </div>
        </div>
    </div>

</body>
</html>